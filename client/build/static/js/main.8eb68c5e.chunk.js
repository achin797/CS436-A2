(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(33)},26:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(6),r=a.n(i),c=(a(26),a(13)),o=a.n(c),l=a(18),u=a(7),d=a(10),h=a(8),p=a(1),m=a(4),f=a(11),g=a(9);function E(e){var t=e.text,a=e.onChange;return s.a.createElement("section",{onChange:a,className:"theDialog"},s.a.createElement("h1",null,t),s.a.createElement("article",null,t))}var v=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={dialogText:""},a.createMessage=a.createMessage.bind(Object(p.a)(a)),a.updateDialog=a.updateDialog.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"createMessage",value:function(e){var t=this;return s.a.createElement("div",{className:"theMessage"},s.a.createElement("li",{onClick:function(){return t.updateDialog(e.text)},key:e.key},e.text,s.a.createElement("button",{onClick:function(a){return t.deleteMessage(e.key,e.text,a)},className:"deleteButton"},"X")))}},{key:"deleteMessage",value:function(e,t,a){this.props.delete(e),this.state.dialogText===t&&this.updateDialog(""),a.stopPropagation()}},{key:"updateDialog",value:function(e){this.setState({dialogText:e})}},{key:"render",value:function(){var e=this.props.entries.map(this.createMessage);return s.a.createElement("div",null,s.a.createElement("ul",{className:"theList"},e),s.a.createElement(E,{text:this.state.dialogText,onChange:this.updateDialog}))}}]),t}(n.Component),b=(a(32),function(e){return{type:"UPDATE_MESSAGES",payload:e}}),y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).callBackendAPI=Object(l.a)(o.a.mark(function e(){var t,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/express_backend",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)})),a.addItem=a.addItem.bind(Object(p.a)(a)),a.deleteMessage=a.deleteMessage.bind(Object(p.a)(a)),a.state={isLoading:!0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.callBackendAPI().then(function(t){for(var a=0;a<t.length;a++)t[a]&&(e.props.addMessage(t[a]),e.setState({isLoading:!1}))}).catch(function(e){return console.log(e)})}}]),Object(m.a)(t,[{key:"addItem",value:function(e){var t=this;if(""!==this._inputElement.value){this.setState({isLoading:!0});var a={text:this._inputElement.value,key:Date.now()};this.props.postMessage(a).then(function(){t.setState({isLoading:!1})}),this._inputElement.value=""}console.log(this.props.items),e.preventDefault()}},{key:"deleteMessage",value:function(e){var t=this;this.setState({isLoading:!0}),this.props.deleteMessageExpress(e).then(function(){t.setState({isLoading:!1})})}},{key:"render",value:function(){var e=this;return this.state.isLoading?s.a.createElement("div",{className:"messageListMain"},s.a.createElement("div",{className:"loader"},s.a.createElement("div",{className:"loader-icon"}),s.a.createElement("div",{className:"loader-text"},"the server is super slow"))):s.a.createElement("div",{className:"messageListMain"},s.a.createElement("div",{className:"header"},s.a.createElement("form",{onSubmit:this.addItem},s.a.createElement("input",{ref:function(t){return e._inputElement=t}}),s.a.createElement("button",{type:"submit"},"add"))),s.a.createElement(v,{entries:this.props.items,delete:this.deleteMessage}))}}]),t}(n.Component),j=Object(g.b)(function(e){return{items:e.items}},{addMessage:function(e){return{type:"ADD_MESSAGE",payload:e}},postMessage:function(e){return function(t){return fetch("/express_backend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){e.json().then(function(e){t(b(e))}).catch(function(e){throw e})}).catch(function(e){throw e})}},deleteMessageExpress:function(e){return function(t){return fetch("/express_backend/"+e,{method:"DELETE"}).then(function(e){e.json().then(function(e){t(b(e))}).catch(function(e){throw e})}).catch(function(e){throw e})}}})(y),M=a(2),k=[],O=Object(M.c)({items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;return"ADD_MESSAGE"===t.type?e.concat(t.payload):"UPDATE_MESSAGES"===t.type?t.payload:e}}),x=a(20),S=Object(M.d)(O,Object(M.a)(x.a)),D=document.querySelector("#container");r.a.render(s.a.createElement("div",null,s.a.createElement(g.a,{store:S},s.a.createElement(j,null))),D)}},[[21,1,2]]]);
//# sourceMappingURL=main.8eb68c5e.chunk.js.map